{
  "metadata": {
    "agent_name": "lambda-autotuner",
    "integration": "mlflow",
    "description": "Synthetic dataset of questions for testing the Lambda Auto-Tuner Agent with MLflow tracing and tracking",
    "version": "1.0",
    "total_questions": 25
  },
  "questions": [
    {
      "id": 1,
      "category": "basic_listing",
      "question": "Can you list all the Lambda functions in my AWS account?",
      "expected_tools": ["list_lambda_functions"],
      "difficulty": "easy",
      "tags": ["listing", "discovery", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "list_lambda_functions"],
        "metrics_expected": ["agent_turns", "tools_invoked"]
      }
    },
    {
      "id": 2,
      "category": "configuration_query",
      "question": "What is the current configuration of my-lambda-function?",
      "expected_tools": ["get_lambda_configuration"],
      "difficulty": "easy",
      "tags": ["configuration", "single_function", "mlflow_trace"],
      "notes": "Replace 'my-lambda-function' with actual function name",
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "get_lambda_configuration"],
        "metadata_expected": ["session_id", "user_message"]
      }
    },
    {
      "id": 3,
      "category": "performance_analysis",
      "question": "Can you fetch the performance metrics for my-lambda-function over the last 30 minutes?",
      "expected_tools": ["fetch_lambda_metrics"],
      "difficulty": "easy",
      "tags": ["metrics", "performance", "mlflow_trace"],
      "notes": "Replace 'my-lambda-function' with actual function name",
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "fetch_lambda_metrics"],
        "metrics_expected": ["execution_time", "response_chars"]
      }
    },
    {
      "id": 4,
      "category": "full_analysis",
      "question": "Analyze the performance of my-lambda-function and tell me if it needs optimization",
      "expected_tools": ["get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics"],
      "difficulty": "medium",
      "tags": ["analysis", "optimization", "multi_step", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics"],
        "metrics_expected": ["agent_turns", "tools_invoked"],
        "tool_count_min": 3
      }
    },
    {
      "id": 5,
      "category": "full_optimization",
      "question": "Can you optimize the memory settings for my-lambda-function based on its current performance?",
      "expected_tools": ["get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action"],
      "difficulty": "medium",
      "tags": ["optimization", "memory", "multi_step", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action"],
        "metrics_expected": ["agent_turns", "tools_invoked", "execution_time"],
        "tool_count_min": 4
      }
    },
    {
      "id": 6,
      "category": "troubleshooting",
      "question": "Why is my-lambda-function experiencing throttles? What should I do?",
      "expected_tools": ["fetch_lambda_metrics", "get_lambda_configuration", "analyze_metrics"],
      "difficulty": "medium",
      "tags": ["throttling", "troubleshooting", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "fetch_lambda_metrics", "analyze_metrics"],
        "metadata_expected": ["session_id", "response_length"],
        "metrics_expected": ["tools_invoked"]
      }
    },
    {
      "id": 7,
      "category": "troubleshooting",
      "question": "My-lambda-function has a high error rate. Can you investigate and suggest a fix?",
      "expected_tools": ["fetch_lambda_metrics", "analyze_metrics", "decide_action"],
      "difficulty": "medium",
      "tags": ["errors", "troubleshooting", "optimization", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "fetch_lambda_metrics", "analyze_metrics", "decide_action"],
        "metrics_expected": ["agent_turns", "tools_invoked"]
      }
    },
    {
      "id": 8,
      "category": "cost_optimization",
      "question": "Are any of my Lambda functions over-provisioned? I want to reduce costs.",
      "expected_tools": ["list_lambda_functions", "fetch_lambda_metrics", "analyze_metrics"],
      "difficulty": "hard",
      "tags": ["cost", "optimization", "multi_function", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "list_lambda_functions", "fetch_lambda_metrics", "analyze_metrics"],
        "metrics_expected": ["agent_turns", "tools_invoked", "execution_time"],
        "tool_count_min": 3
      }
    },
    {
      "id": 9,
      "category": "action_application",
      "question": "Apply the recommended memory optimization for my-lambda-function (dry run first)",
      "expected_tools": ["get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action", "apply_action"],
      "difficulty": "hard",
      "tags": ["apply", "optimization", "dry_run", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action", "apply_action"],
        "metrics_expected": ["agent_turns", "tools_invoked", "execution_time"],
        "tool_count_min": 5
      }
    },
    {
      "id": 10,
      "category": "cloudwatch_logs",
      "question": "Show me the recent CloudWatch logs for Lambda functions",
      "expected_tools": ["fetch_cloudwatch_logs_for_service"],
      "difficulty": "easy",
      "tags": ["cloudwatch", "logs", "monitoring", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "fetch_cloudwatch_logs_for_service"],
        "metrics_expected": ["agent_turns", "tools_invoked"]
      }
    },
    {
      "id": 11,
      "category": "cloudwatch_logs",
      "question": "Analyze the log group for my-lambda-function and check for errors",
      "expected_tools": ["analyze_log_group"],
      "difficulty": "medium",
      "tags": ["cloudwatch", "logs", "errors", "analysis", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "analyze_log_group"],
        "metadata_expected": ["session_id", "response_length"],
        "metrics_expected": ["agent_turns", "tools_invoked"]
      }
    },
    {
      "id": 12,
      "category": "cloudwatch_alarms",
      "question": "Are there any CloudWatch alarms triggered for Lambda functions?",
      "expected_tools": ["get_cloudwatch_alarms_for_service"],
      "difficulty": "easy",
      "tags": ["cloudwatch", "alarms", "monitoring", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "get_cloudwatch_alarms_for_service"],
        "metrics_expected": ["agent_turns", "tools_invoked"]
      }
    },
    {
      "id": 13,
      "category": "research",
      "question": "What are the best practices for optimizing Lambda function memory settings?",
      "expected_tools": ["internet_search"],
      "difficulty": "easy",
      "tags": ["research", "best_practices", "optimization", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "internet_search"],
        "metrics_expected": ["agent_turns", "tools_invoked", "response_chars"]
      }
    },
    {
      "id": 14,
      "category": "complex_scenario",
      "question": "I have a Lambda function that's timing out frequently. Can you diagnose the issue, check metrics, and recommend a solution?",
      "expected_tools": ["get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action", "internet_search"],
      "difficulty": "hard",
      "tags": ["troubleshooting", "timeout", "multi_step", "complex", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action"],
        "metrics_expected": ["agent_turns", "tools_invoked", "execution_time", "response_chars"],
        "tool_count_min": 4
      }
    },
    {
      "id": 15,
      "category": "complex_scenario",
      "question": "Audit all my Lambda functions and create a report showing which ones need optimization",
      "expected_tools": ["list_lambda_functions", "fetch_lambda_metrics", "analyze_metrics"],
      "difficulty": "hard",
      "tags": ["audit", "report", "multi_function", "complex", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "list_lambda_functions", "fetch_lambda_metrics", "analyze_metrics"],
        "metrics_expected": ["agent_turns", "tools_invoked", "execution_time"],
        "tool_count_min": 3
      }
    },
    {
      "id": 16,
      "category": "comparison",
      "question": "Compare the performance metrics of function-a and function-b",
      "expected_tools": ["fetch_lambda_metrics", "get_lambda_configuration"],
      "difficulty": "medium",
      "tags": ["comparison", "metrics", "multi_function", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "fetch_lambda_metrics", "get_lambda_configuration"],
        "metrics_expected": ["agent_turns", "tools_invoked"],
        "tool_count_min": 2
      }
    },
    {
      "id": 17,
      "category": "threshold_analysis",
      "question": "Check if any functions have error rates above 1%",
      "expected_tools": ["list_lambda_functions", "fetch_lambda_metrics", "analyze_metrics"],
      "difficulty": "medium",
      "tags": ["errors", "threshold", "analysis", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "list_lambda_functions", "fetch_lambda_metrics", "analyze_metrics"],
        "metrics_expected": ["agent_turns", "tools_invoked"],
        "tool_count_min": 3
      }
    },
    {
      "id": 18,
      "category": "threshold_analysis",
      "question": "Find Lambda functions that are using more than 70% of their timeout budget",
      "expected_tools": ["list_lambda_functions", "get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics"],
      "difficulty": "hard",
      "tags": ["timeout", "threshold", "analysis", "multi_function", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "list_lambda_functions", "get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics"],
        "metrics_expected": ["agent_turns", "tools_invoked", "execution_time"],
        "tool_count_min": 4
      }
    },
    {
      "id": 19,
      "category": "edge_cases",
      "question": "My function is already at 10GB memory but still slow. What should I do?",
      "expected_tools": ["get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "internet_search"],
      "difficulty": "hard",
      "tags": ["edge_case", "max_memory", "troubleshooting", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics"],
        "metrics_expected": ["agent_turns", "tools_invoked"],
        "tool_count_min": 3
      }
    },
    {
      "id": 20,
      "category": "historical_analysis",
      "question": "Show me performance trends for my-lambda-function over the last 2 hours",
      "expected_tools": ["fetch_lambda_metrics"],
      "difficulty": "medium",
      "tags": ["metrics", "historical", "trends", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "fetch_lambda_metrics"],
        "metrics_expected": ["agent_turns", "tools_invoked", "response_chars"]
      }
    },
    {
      "id": 21,
      "category": "multi_metric_analysis",
      "question": "Give me a complete health check for my-lambda-function including errors, throttles, duration, and recommendations",
      "expected_tools": ["get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action"],
      "difficulty": "medium",
      "tags": ["health_check", "comprehensive", "multi_metric", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action"],
        "metrics_expected": ["agent_turns", "tools_invoked", "execution_time"],
        "tool_count_min": 4
      }
    },
    {
      "id": 22,
      "category": "proactive_optimization",
      "question": "I'm launching a new feature tomorrow that will increase traffic. Help me prepare my Lambda functions",
      "expected_tools": ["list_lambda_functions", "fetch_lambda_metrics", "analyze_metrics", "internet_search"],
      "difficulty": "hard",
      "tags": ["proactive", "capacity_planning", "optimization", "mlflow_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "list_lambda_functions", "fetch_lambda_metrics", "analyze_metrics"],
        "metrics_expected": ["agent_turns", "tools_invoked", "execution_time"],
        "tool_count_min": 3
      }
    },
    {
      "id": 23,
      "category": "mlflow_tracing_validation",
      "question": "Show me the first 5 Lambda functions and their current memory settings",
      "expected_tools": ["list_lambda_functions"],
      "difficulty": "easy",
      "tags": ["listing", "configuration", "mlflow_validation"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "list_lambda_functions"],
        "metadata_expected": ["session_id", "user_message", "input_message_count", "output_message_count"],
        "metrics_expected": ["agent_turns", "tools_invoked", "response_characters", "total_messages"],
        "tags_expected": ["agent_type", "environment"]
      }
    },
    {
      "id": 24,
      "category": "mlflow_error_handling",
      "question": "Check metrics for a-nonexistent-lambda-function-xyz",
      "expected_tools": ["fetch_lambda_metrics"],
      "difficulty": "easy",
      "tags": ["error_handling", "mlflow_error_trace"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation"],
        "metadata_expected": ["success", "error", "error_type"],
        "error_expected": true
      }
    },
    {
      "id": 25,
      "category": "mlflow_performance_validation",
      "question": "Analyze my-lambda-function performance and recommend optimizations with full justification",
      "expected_tools": ["get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action"],
      "difficulty": "hard",
      "tags": ["comprehensive", "mlflow_performance", "multi_step"],
      "mlflow_expectations": {
        "trace_logged": true,
        "spans_expected": ["agent_invocation", "get_lambda_configuration", "fetch_lambda_metrics", "analyze_metrics", "decide_action"],
        "metadata_expected": ["session_id", "user_message", "response_length", "message_count", "success"],
        "metrics_expected": ["agent_turns", "tools_invoked", "execution_time", "response_characters", "total_messages"],
        "tags_expected": ["agent_type", "environment"],
        "tool_count_min": 4
      }
    }
  ],
  "usage_notes": {
    "placeholder_functions": "Replace 'my-lambda-function', 'function-a', and 'function-b' with actual function names from your AWS account",
    "testing_approach": "Start with easy questions to validate basic MLflow tracing, then move to medium and hard questions to validate comprehensive tracing",
    "mlflow_validation": "After running these questions, check your MLflow/Databricks UI to verify traces are logged correctly with proper spans, metadata, and metrics",
    "expected_behavior": "The agent should use appropriate tools and all executions should be traced in MLflow with proper metadata",
    "dry_run_default": "The agent should default to dry_run=True for apply_action unless explicitly told to apply changes"
  },
  "categories": {
    "basic_listing": "Questions about discovering and listing Lambda functions with MLflow tracing",
    "configuration_query": "Questions about Lambda function configuration with MLflow tracing",
    "performance_analysis": "Questions about analyzing performance metrics with MLflow tracing",
    "full_analysis": "Questions requiring complete analysis workflow with multi-span tracing",
    "full_optimization": "Questions requiring analysis and optimization with comprehensive tracing",
    "troubleshooting": "Questions about diagnosing and fixing issues with error tracing",
    "cost_optimization": "Questions about reducing costs with multi-function tracing",
    "action_application": "Questions about applying configuration changes with action tracing",
    "cloudwatch_logs": "Questions about CloudWatch logs with log tracing",
    "cloudwatch_alarms": "Questions about CloudWatch alarms with alarm tracing",
    "research": "Questions requiring internet research with search tracing",
    "complex_scenario": "Multi-step complex scenarios with comprehensive tracing",
    "comparison": "Questions comparing multiple functions with parallel tracing",
    "threshold_analysis": "Questions about threshold-based analysis with metric tracing",
    "edge_cases": "Questions testing edge cases and limits with error handling tracing",
    "historical_analysis": "Questions about historical metrics with time-series tracing",
    "multi_metric_analysis": "Questions requiring multiple metrics with comprehensive tracing",
    "proactive_optimization": "Questions about proactive optimization with planning tracing",
    "mlflow_tracing_validation": "Questions specifically designed to validate MLflow tracing features",
    "mlflow_error_handling": "Questions designed to test error tracing in MLflow",
    "mlflow_performance_validation": "Questions designed to validate comprehensive performance tracking in MLflow"
  },
  "mlflow_integration_notes": {
    "trace_validation": "Each question should produce a trace in MLflow with the expected spans",
    "metadata_validation": "Verify that session_id, user_message, response_length, and other metadata are logged",
    "metrics_validation": "Verify that agent_turns, tools_invoked, execution_time, and response_chars metrics are logged",
    "tags_validation": "Verify that agent_type and environment tags are present",
    "error_tracing": "Questions with errors should still create traces with error metadata",
    "databricks_ui": "Check Databricks workspace at DATABRICKS_HOST to view traces",
    "experiment_tracking": "All runs should be logged to the MLflow experiment specified in configuration"
  }
}
